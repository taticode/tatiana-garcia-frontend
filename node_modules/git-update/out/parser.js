"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var program = require("commander");
var fs = require("fs");
var logger_1 = require("./logger");
var ApiConfig_1 = require("./model/ApiConfig");
var defaultConfig = new ApiConfig_1.default({});
program
    .version('0.0.1')
    .option('-t, --token [token]', 'Set token or username:password, Required')
    .option('-n, --namespace [namespace]', 'Set namespace, if use multiple namespaces, seperate by ",", Required')
    .option('-u, --url [url]', "Set gitlab/bitbucket url, Optional.")
    .option('-d, --dir [dir]', "Set target directory, Default: ~/tmp")
    .option('-l, --list', "List projects")
    .on('--help', function () {
    console.log('  Examples:');
    console.log('');
    console.log('  Clone/Update projects in namespace:');
    console.log('    $ gitlab-update -t token -n namespace -d /tmp');
    console.log('    $ bitbucket-update -t username:password -n team1,team2,team3 -d /tmp');
    console.log('  List projects in certain namespace:');
    console.log('    $ gitlab-update -t token -n namespace -d /tmp -l');
    console.log('');
})
    .parse(process.argv);
if (program.token === undefined || program.namespace === undefined) {
    logger_1.default.error("[error] token / namespace should exist");
    process.exit(1);
}
var dir = program.dir || defaultConfig.dir;
if (!fs.existsSync(dir)) {
    logger_1.default.error(" [error] dir " + dir + " should exists");
    process.exit(1);
}
exports.default = program;
